{"version":3,"file":"carrito-Drjjzm9X.js","sources":["../../../../pages/carrito.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1 class=\"text-3xl font-bold text-center mb-8\">Tu Carrito</h1>\r\n    \r\n    <div v-if=\"$carrito.length === 0\" class=\"text-center py-8\">\r\n      <p class=\"text-xl text-gray-600\">Tu carrito está vacío</p>\r\n      <NuxtLink to=\"/\" class=\"inline-block mt-4 bg-purple-600 text-white py-2 px-6 rounded hover:bg-purple-700\">\r\n        Ver productos\r\n      </NuxtLink>\r\n    </div>\r\n    \r\n    <div v-else>\r\n      <div class=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n        <div v-for=\"(item, index) in $carrito\" :key=\"item.id\" class=\"flex flex-col md:flex-row items-center py-4 border-b last:border-b-0\">\r\n          <img :src=\"item.imagen\" :alt=\"item.nombre\" class=\"w-24 h-24 object-cover rounded mb-4 md:mb-0 md:mr-6\">\r\n          \r\n          <div class=\"flex-1\">\r\n            <h3 class=\"text-lg font-semibold\">{{ item.nombre }}</h3>\r\n            <p class=\"text-gray-600\">{{ item.descripcion }}</p>\r\n          </div>\r\n          \r\n          <div class=\"flex items-center mt-4 md:mt-0\">\r\n            <button @click=\"decrementarCantidad(index)\" \r\n                    class=\"bg-gray-200 text-gray-700 w-8 h-8 flex items-center justify-center rounded-l\">\r\n              -\r\n            </button>\r\n            <span class=\"bg-gray-100 text-gray-700 w-12 h-8 flex items-center justify-center\">\r\n              {{ item.cantidad }}\r\n            </span>\r\n            <button @click=\"incrementarCantidad(index)\" \r\n                    class=\"bg-gray-200 text-gray-700 w-8 h-8 flex items-center justify-center rounded-r\">\r\n              +\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"text-right ml-6\">\r\n            <p class=\"text-lg font-semibold text-purple-700\">\r\n              ${{ formatearPrecio(item.precio * item.cantidad) }}\r\n            </p>\r\n            <button @click=\"eliminarDelCarrito(index)\" class=\"text-red-500 text-sm hover:text-red-700\">\r\n              Eliminar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div class=\"flex justify-between items-center mb-4\">\r\n          <span class=\"text-lg\">Subtotal:</span>\r\n          <span class=\"text-lg font-semibold\">${{ formatearPrecio(calcularSubtotal()) }}</span>\r\n        </div>\r\n        \r\n        <div class=\"flex justify-between items-center mb-4\">\r\n          <span class=\"text-lg\">IVA (19%):</span>\r\n          <span class=\"text-lg font-semibold\">${{ formatearPrecio(calcularIVA()) }}</span>\r\n        </div>\r\n        \r\n        <div class=\"flex justify-between items-center mb-6 border-t pt-4\">\r\n          <span class=\"text-xl font-bold\">Total:</span>\r\n          <span class=\"text-xl font-bold text-purple-700\">${{ formatearPrecio(calcularTotal()) }}</span>\r\n        </div>\r\n        \r\n        <button @click=\"procesarPago\" \r\n                class=\"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition text-lg font-semibold\">\r\n          Proceder al pago\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useToast } from '~/composables/useToast';\r\n\r\n// Estado del carrito\r\nconst $carrito = useState('carrito', () => []);\r\nconst { mostrarToast } = useToast();\r\n\r\n// Funciones para manejar cantidades\r\nconst incrementarCantidad = (index) => {\r\n  $carrito.value[index].cantidad += 1;\r\n};\r\n\r\nconst decrementarCantidad = (index) => {\r\n  if ($carrito.value[index].cantidad > 1) {\r\n    $carrito.value[index].cantidad -= 1;\r\n  } else {\r\n    eliminarDelCarrito(index);\r\n  }\r\n};\r\n\r\nconst eliminarDelCarrito = (index) => {\r\n  const nombreProducto = $carrito.value[index].nombre;\r\n  $carrito.value.splice(index, 1);\r\n  mostrarToast(`${nombreProducto} eliminado del carrito`);\r\n};\r\n\r\n// Funciones para calcular totales\r\nconst calcularSubtotal = () => {\r\n  return $carrito.value.reduce((total, item) => {\r\n    return total + (item.precio * item.cantidad);\r\n  }, 0);\r\n};\r\n\r\nconst calcularIVA = () => {\r\n  return calcularSubtotal() * 0.19;\r\n};\r\n\r\nconst calcularTotal = () => {\r\n  return calcularSubtotal() + calcularIVA();\r\n};\r\n\r\n// Función para formatear precios\r\nconst formatearPrecio = (precio) => {\r\n  return Math.round(precio).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n};\r\n\r\n// Función para procesar el pago\r\nconst procesarPago = () => {\r\n  // En una aplicación real, aquí se conectaría con un sistema de pagos\r\n  mostrarToast('¡Gracias por tu compra!', 'success');\r\n  setTimeout(() => {\r\n    $carrito.value = [];\r\n    navigateTo('/');\r\n  }, 2000);\r\n};\r\n</script>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AA2EA,UAAM,WAAW,SAAS,WAAW,MAAM,CAAE,CAAA;AAuB7C,UAAM,mBAAmB,MAAM;AAC7B,aAAO,SAAS,MAAM,OAAO,CAAC,OAAO,SAAS;AAC5C,eAAO,QAAS,KAAK,SAAS,KAAK;AAAA,MACpC,GAAE,CAAC;AAAA,IACN;AAEA,UAAM,cAAc,MAAM;AACxB,aAAO,iBAAkB,IAAG;AAAA,IAC9B;AAEA,UAAM,gBAAgB,MAAM;AAC1B,aAAO,iBAAgB,IAAK;IAC9B;AAGA,UAAM,kBAAkB,CAAC,WAAW;AAClC,aAAO,KAAK,MAAM,MAAM,EAAE,SAAQ,EAAG,QAAQ,yBAAyB,GAAG;AAAA,IAC3E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}